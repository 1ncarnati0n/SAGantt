## 데이터 준비

다음과 같은 정보를 Gantt에 로드할 수 있습니다:

- [`tasks`](https://docs.svar.dev/react/gantt/api/properties/tasks) - 작업에 대한 데이터를 담고 있는 객체 배열

```json
const tasks = [
  {
    id: 1,
    open: true,
    start: new Date(2023, 11, 6),
    duration: 8,
    text: "React Gantt Widget",
    progress: 60,
    type: "summary"
  },
  {
    id: 2,
    parent: 1,
    start: new Date(2023, 11, 6),
    duration: 4,
    text: "Lib-Gantt",
    progress: 80
  },
  {
    id: 3,
    parent: 1,
    start: new Date(2023, 11, 11),
    duration: 4,
    text: "UI Layer",
    progress: 30
  },
  {
    id: 4,
    start: new Date(2023, 11, 12),
    duration: 8,
    text: "Documentation",
    progress: 10,
    type: "summary"
  },
  {
    id: 5,
    parent: 4,
    start: new Date(2023, 11, 10),
    duration: 1,
    text: "Overview",
    progress: 30
  },
  {
    id: 6,
    parent: 4,
    start: new Date(2023, 12, 11),
    duration: 8,
    text: "API reference",
    progress: 0
  }
];
```

- [`columns`](https://docs.svar.dev/react/gantt/api/properties/columns) - 테이블 부분(작업 트리를 포함하는 그리드 영역)에 대한 열 데이터를 담고 있는 객체 배열

```json
const columns = [
  { id: "text", header: "Task name", flexGrow: 2 },
  {
    id: "start",
    header: "Start date",
    flexGrow: 1,
    align: "center",
  },
  {
    id: "duration",
    header: "Duration",
    align: "center",
    flexGrow: 1,
  },
  {
    id: "action",
    header: "",
    width: 50,
    align: "center",
  },
];
```

- [`links`](https://docs.svar.dev/react/gantt/api/properties/links) - 항목 간의 종속성(링크)에 대한 데이터를 담고 있는 객체 배열

```tsx
const links = [
    { id: 1, source: 3, target: 4, type: "e2s" },
    { id: 2, source: 1, target: 2, type: "e2s" },
    { id: 21, source: 8, target: 1, type: "s2s" },
    { id: 22, source: 1, target: 6, type: "s2s" },
];
```

- [`scales`](https://docs.svar.dev/react/gantt/api/properties/scales) - 시간 스케일에 대한 데이터를 담고 있는 객체 배열

```tsx
const scales = [
    { unit: "month", step: 1, format: "MMMM yyy" },
    { unit: "day", step: 1, format: "d", css: dayStyle },
];
```

Gantt에 작업, 열, 링크, 스케일을 전달하려면 초기화 중에 데이터를 가져오고 컴포넌트를 정의하세요:

```tsx
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";

const GanttComponent = () => {
  const data = getData();

  return (
    <Gantt
      tasks={data.tasks}
      links={data.links}
      scales={data.scales}
    />
  );
};

export default GanttComponent;
```

## 로컬 소스에서 데이터를 로드합니다

초기화 단계에서 별도의 파일에서 미리 정의된 데이터를 로드할 수 있습니다.  

먼저 데이터 파일을 애플리케이션 페이지에 추가하고 **Gantt** 컴포넌트를 가져옵니다:

```tsx
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
```

두 번째로, **Gantt** 초기화 중에 컴포넌트를 정의합니다:

```tsx
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import React from 'react';

const App = () => {
  const data = getData();

  return (
    <Gantt
      tasks={data.tasks}
      links={data.links}
      scales={data.scales}
    />
  );
};

export default App;
```

## 서버에서 데이터를 로드합니다

서버 데이터를 로드할 수도 있습니다. 서버에서 데이터를 가져와서 동일한 데이터 태그와 함께 Gantt에 전달해야 합니다.

서버 데이터를 얻으려면 다음 중 하나를 수행할 수 있습니다:

- 데이터 요청을 네이티브 **fetch** 메서드(또는 다른 방법)를 사용하여 전송하세요

예시:

```tsx
import React, { useEffect, useRef, useState } from "react";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";

const server = "https://some-backend-url";

const GanttComponent = () => {
  const apiRef = useRef();
  const [tasks, setTasks] = useState([]);
  const [links, setLinks] = useState([]);

  useEffect(() => {
    Promise.all([
      fetch(server + "/tasks").then(res => res.json()),
      fetch(server + "/links").then(res => res.json()),
    ]).then(([t, l]) => {
      setTasks(t);
      setLinks(l);
    });
  }, []);

  return <Gantt apiRef={apiRef} tasks={tasks} links={links} />;
};

export default GanttComponent;
```

- 준비된 **RestDataProvider** 서비스를 사용하고 백엔드에 연결하세요. 먼저 가져오고 그 다음에 [`getData`](https://docs.svar.dev/react/gantt/helpers/rest_methods/getdata_method) 메서드를 적용하세요. 모든 상세 지침은 여기서 찾을 수 있습니다: [서버와 작업하기](https://docs.svar.dev/react/gantt/guides/working_with_server/#connecting-restdataprovider-to-the-backend).

예시:

```tsx
import React, { useEffect, useState, useRef } from "react";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import { RestDataProvider } from "wx-gantt-data-provider";

const GanttComponent = () => {
  const server = new RestDataProvider("https://some_backend_url");
  const [tasks, setTasks] = useState([]);
  const [links, setLinks] = useState([]);
  const apiRef = useRef();

  useEffect(() => {
    server.getData().then(data => {
      setTasks(data.tasks);
      setLinks(data.links);
    });
  }, []);

  useEffect(() => {
    if (apiRef.current) {
      apiRef.current.setNext(server);
    }
  }, [apiRef.current]);

  return <Gantt tasks={tasks} links={links} apiRef={apiRef} />;
};

export default GanttComponent;
```

## 동적 데이터 로딩

위젯은 동적으로 데이터를 로드할 수도 있습니다. 이 기능을 활성화하려면, [`tasks`](https://docs.svar.dev/react/gantt/api/properties/tasks) 배열에서 동적으로 로드할 하위 작업을 가진 작업 브랜치에 대해 **lazy** 필드를 **true**로 설정하고, 서버를 조정하여 이러한 하위 작업의 내용이 초기 로드 시 로드되지 않도록 해야 합니다.

데이터 배열의 예:

```tsx
const tasks = [
  {
    id: 1,
    open: false,
    start: new Date(2020, 11, 6),
    duration: 8,
    text: "React Gantt Widget",
    progress: 60,
    type: "summary",
    lazy: true
  },
  {
    id: 3,
    open: false,
    start: new Date(2020, 11, 7),
    duration: 8,
    text: "React Gantt Widget",
    progress: 68,
    type: "summary",
    lazy: true
  },
];
```

이러한 작업 분기가 UI에서 열릴 때, Gantt은 폴더 ID를 매개변수로 [`request-data`](https://docs.svar.dev/react/gantt/api/actions/request-data) 액션을 발행합니다. 우리는 [`api.on()`](https://docs.svar.dev/react/gantt/api/methods/on) 메서드로 이 액션을 수신하고, 서버에서 작업 분기 데이터를 가져오며, [`provide-data`](https://docs.svar.dev/react/gantt/api/actions/provide-data) 액션을 호출하는 컴포넌트로 파싱합니다.

```tsx
import React, { useEffect, useRef, useState } from "react";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";

const App = () => {
  const [tasks, setTasks] = useState([]);
  const [links, setLinks] = useState([]);
  const apiRef = useRef(null);
  const server = "https://some-backend-url";

  useEffect(() => {
    Promise.all([
      fetch(server + "/tasks").then(res => res.json()),
      fetch(server + "/links").then(res => res.json()),
    ]).then(([t, l]) => {
      setTasks(t);
      setLinks(l);
    });
  }, []);

  const init = (api) => {
    apiRef.current = api;
    api.on("request-data", ev => {
      Promise.all([
        fetch(server + `/tasks/${ev.id}`).then(res => res.json()),
        fetch(server + `/links/${ev.id}`).then(res => res.json()),
      ]).then(([tasks, links]) => {
        api.exec("provide-data", {
          id: ev.id,
          data: {
            tasks,
            links,
          },
        });
      });
    });
  };

  return <Gantt init={init} tasks={tasks} links={links} />;
};

export default App;
```
