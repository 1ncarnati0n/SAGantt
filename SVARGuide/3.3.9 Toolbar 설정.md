Configuring toolbar

출처: https://docs.svar.dev/react/gantt/guides/configuration/toolbar

## 개요

이 `widget`는 `Toolbar`를 구성하기 위한 두 가지 가능한 방법을 제공합니다:

- Gantt의 내부 `Toolbar` 컴포넌트를 사용하고 `defaultToolbarButtons` 배열을 사용 (wx-react-gantt에서 `import`)
- 구성 가능한 데이터를 가진 외부 `Toolbar` 컴포넌트를 사용 (wx-react-toolbar에서 `import`)

## `Adding the default toolbar`

`toolbar`를 추가하려면, Gantt의 `Toolbar` 컴포넌트를 `import`하고, `Toolbar` 태그를 추가하세요. 또한 `api` 객체를 사용하고 그것을 `Toolbar`에 전달해야 합니다.

```javascript
import { getData } from "./common/data";
import { Gantt, Toolbar } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import { useRef } from "react";

function App() {
  const data = getData();
  const apiRef = useRef();

  return (
    <>
      <Toolbar api={apiRef.current} />
      <Gantt apiRef={apiRef} tasks={data.tasks} />
    </>
  );
}

export default App;
```

## `Configuring the set of buttons in the toolbar`

`toolbar`를 구성하려면 (도구모음의 버튼들의 집합 및 그들의 모양), Gantt의 `Toolbar` 컴포넌트를 `import`하고 `items` 배열을 필요한 변경사항들과 함께 만드세요. `Toolbar` 태그에 `items` 속성을 추가하는 것을 잊지 마세요.

```javascript
import { getData } from "../data";
import { Gantt, Toolbar } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import React, { useRef } from "react";

const Component = () => {
  const apiRef = useRef();
  const data = getData();

  const items = [
    {
      id: "add-task",
      comp: "button",
      icon: "wxi-plus",
      text: "Add task",
      type: "primary",
    },
    {
      id: "edit-task",
      comp: "button",
      icon: "wxi-edit",
      text: "edit",
      type: "link",
    },
  ];

  return (
    <>
      <Toolbar api={apiRef.current} items={items} />
      <Gantt apiRef={apiRef} tasks={data.tasks} />
    </>
  );
};

export default Component;
```

또한 `defaultToolbarButtons` 배열을 `import`하고 변경하여 `Toolbar`를 커스터마이징할 수 있습니다.

```javascript
import { getData } from "../data";
import { Gantt, Toolbar, defaultToolbarButtons } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import { useRef } from "react";

function MyComponent() {
  const apiRef = useRef();
  const data = getData();

  // remove indentation buttons
  const items = defaultToolbarButtons.filter(b => {
    return b.id?.indexOf("indent") === -1;
  });

  return (
    <>
      <Toolbar apiRef={apiRef} items={items} />
      <Gantt apiRef={apiRef} tasks={data.tasks} />
    </>
  );
}

export default MyComponent;
```

## `Adding a custom toolbar`

아래의 예제는 외부 `Toolbar` 컴포넌트를 적용하여 커스텀 `toolbar`를 추가하는 방법을 보여줍니다. 우리는 `Toolbar` 컴포넌트를 `import`하고, `api.exec()` 메서드를 사용하여 액션들을 처리하기 위한 함수들을 추가하고, `items` 배열을 수정합니다.

```javascript
import React, { useRef, useEffect, useState } from "react";
import { getData } from "../data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import { Toolbar } from "wx-react-toolbar";

const GanttComponent = () => {
  const apiRef = useRef();
  const data = getData();
  const [selected, setSelected] = useState([]);
  const [items, setItems] = useState([]);

  useEffect(() => {
    if (apiRef.current) {
      setSelected(apiRef.current.getReactiveState().selected);
      setItems(selected.length ? allItems : [allItems[0]]);
    }
  }, [selected]);

  const handleAdd = () => {
    apiRef.current.exec("add-task", {
      task: {
        text: "New task",
      },
      target: selected[0],
      mode: "after",
    });
  };

  const handleDelete = () => {
    const order = getActionOrder(true);
    order.forEach(id => apiRef.current.exec("delete-task", { id }));
  };

  const handleMove = (mode) => {
    const changeDir = mode === "down";
    const order = getActionOrder(changeDir);
    order.forEach(id => apiRef.current.exec("move-task", { id, mode }));
  };

  const getActionOrder = (changeDir) => {
    const tasks = selected
      .map(id => apiRef.current.getTask(id))
      .sort((a, b) => {
        return a.$level - b.$level || a.$y - b.$y;
      });
    const idOrder = tasks.map(o => o.id);
    if (changeDir) return idOrder.reverse();
    return idOrder;
  };

  const allItems = [
    {
      comp: "button",
      type: "primary",
      text: "Add task",
      handler: handleAdd,
    },
    {
      comp: "button",
      text: "Delete task",
      handler: handleDelete,
    },
    {
      comp: "button",
      type: "primary",
      text: "Move task down",
      handler: () => handleMove("down"),
    },
    {
      comp: "button",
      type: "primary",
      text: "Move task up",
      handler: () => handleMove("up"),
    },
  ];

  return (
    <>
      <Toolbar items={items} />
      <div className="gtcell">
        <Gantt
          ref={apiRef}
          tasks={data.tasks}
          links={data.links}
          scales={data.scales}
        />
      </div>
    </>
  );
};

export default GanttComponent;
```

### CSS 스타일링 (위의 예제용)

```css
.gtcell {
  height: calc(100% - 50px);
  border-top: var(--wx-gantt-border);
}
```
