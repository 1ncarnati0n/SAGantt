
# Gantt Methods Overview

이 문서는 **React Gantt API**에서 제공하는 주요 **메서드(methods)**를 요약한 것입니다.  
각 메서드는 Gantt 차트의 내부 상태를 제어하거나 이벤트를 관리하기 위해 사용됩니다.

---

## 📘 Gantt Methods 목록

| Method                                                                                     | 설명                                                     |
| :----------------------------------------------------------------------------------------- | :----------------------------------------------------- |
| [`api.detach()`](https://docs.svar.dev/react/gantt/api/methods/detach)                     | 등록된 **action handler**를 제거하거나 분리(detach)합니다.           |
| [`api.exec()`](https://docs.svar.dev/react/gantt/api/methods/exec)                         | 특정 **Gantt action**을 직접 트리거(trigger)합니다.               |
| [`api.getReactiveState()`](https://docs.svar.dev/react/gantt/api/methods/getReactiveState) | Gantt의 **reactive properties**를 포함한 상태 객체를 반환합니다.      |
| [`api.getState()`](https://docs.svar.dev/react/gantt/api/methods/getState)                 | Gantt의 주요 속성 값을 담고 있는 현재 **state object**를 가져옵니다.      |
| [`api.getStores()`](https://docs.svar.dev/react/gantt/api/methods/getStores)               | Gantt 내부의 **DataStore 객체**를 반환합니다.                     |
| [`api.getTask(id)`](https://docs.svar.dev/react/gantt/api/methods/getTask)                 | 특정 ID의 **task configuration 객체**를 가져옵니다.               |
| [`api.intercept()`](https://docs.svar.dev/react/gantt/api/methods/intercept)               | Gantt의 **action 흐름을 가로채거나 수정(intercept)** 할 수 있도록 합니다. |
| [`api.on()`](https://docs.svar.dev/react/gantt/api/methods/on)                             | Gantt 내부 이벤트에 대해 **event handler**를 등록합니다.             |
| [`api.setNext()`](https://docs.svar.dev/react/gantt/api/methods/setNext)                   | **Event Bus** 실행 순서에 새로운 **action**을 추가합니다.            |

---


# api.detach()

이 문서는 **React Gantt API**의 `api.detach()` 메서드에 대한 설명입니다.  
전문 용어(예: API, handler, tag 등)는 영어 그대로 유지하고, 설명은 한국어로 번역하였습니다.

---

## 📝 Description

`api.detach()` 메서드는 등록된 **action handler**를 제거(detach)하는 기능을 제공합니다.  
즉, 이전에 `api.on()`으로 등록된 특정 이벤트 리스너를 중단할 수 있습니다.

---

## ⚙️ Usage

```ts
api.detach(tag: number | string): void;
```

### Parameters

- **tag** — 제거하려는 action handler의 이름 또는 식별자(`string` 또는 `number`).

---

## 💡 Example

아래 예시는 `api.on()`으로 등록된 `"open-task"` 이벤트 리스너를  
`tag` 속성을 이용하여 추적하고, 이후 `api.detach()`로 해당 로그 출력을 중단하는 방법을 보여줍니다.

```jsx
import { useState, useEffect, useRef } from "react";
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";

const MyComponent = () => {
  const [data, setData] = useState(getData());
  const apiRef = useRef();

  useEffect(() => {
    const api = apiRef.current;
    if (api) {
      api.on(
        "open-task",
        ({ id }) => {
          console.log("Opened: " + id);
        },
        { tag: "track" }
      );
    }
  }, [apiRef]);

  const stop = () => {
    const api = apiRef.current;
    api.detach("track");
  };

  return (
    <div>
      <button onClick={stop}>Stop logging</button>
      <Gantt apiRef={apiRef} tasks={data.tasks} links={data.links} />
    </div>
  );
};

export default MyComponent;
```

이 예제에서는:
- `"open-task"` 이벤트가 발생할 때마다 `console.log`로 Task ID를 출력하고,
- `"track"`이라는 tag로 이벤트를 구분합니다.
- 이후 `api.detach("track")`을 호출하면 `"track"` 태그와 관련된 이벤트 핸들러가 모두 제거됩니다.

---


# api.exec()

이 문서는 **React Gantt API**의 `api.exec()` 메서드에 대한 설명입니다.  
전문 용어(예: API, action, config 등)는 영어 그대로 유지하고, 설명은 한국어로 번역하였습니다.

---

## 📝 Description

`api.exec()` 메서드는 Gantt 차트 내에서 특정 **action**을 직접 실행(trigger)할 때 사용됩니다.  
즉, 사용자가 지정한 이벤트나 동작을 프로그래밍적으로 발생시킬 수 있습니다.

---

## ⚙️ Usage

```ts
api.exec(
  action,
  config
);
```

### Parameters

- **action** *(required)* — 실행할 Gantt action의 이름입니다.  
- **config** *(required)* — 실행 시 전달할 설정(config) 객체입니다.  
  (각 action에 필요한 파라미터는 해당 action 문서를 참고하세요.)

---

## 🧩 Actions 참고

사용 가능한 Gantt **actions**의 전체 목록은 아래 문서에서 확인할 수 있습니다:  
👉 [Actions Overview](https://docs.svar.dev/react/gantt/api/overview/actions_overview)

---

## 💡 Example

아래 예시는 `Editor dialog`가 열릴 때 선택된 task의 텍스트를 초기화하는 방법을 보여줍니다.

```jsx
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import { useRef } from "react";

const GanttComponent = () => {
  const data = getData();
  const apiRef = useRef();

  const clearTaskText = () => {
    if (apiRef.current) {
      apiRef.current.exec("update-task", {
        id: 3,
        task: { text: "" }
      });
    }
  };

  return (
    <Gantt ref={apiRef} tasks={data.tasks} onShowEditor={clearTaskText} />
  );
};

export default GanttComponent;
```

이 코드에서는 `api.exec()`을 사용하여 특정 Task(`id: 3`)의 `text` 값을 빈 문자열로 업데이트합니다.  
즉, Editor 창이 열릴 때 자동으로 해당 Task의 이름을 지우는 동작을 수행합니다.

---

## 🔗 Related Articles

- [Working with server](https://docs.svar.dev/react/gantt/guides/working_with_server)
- [How to access Gantt API](https://docs.svar.dev/react/gantt/api/how_to_access_api)
- [api.detach()](https://docs.svar.dev/react/gantt/api/methods/detach)
- [api.intercept()](https://docs.svar.dev/react/gantt/api/methods/intercept)

---

© XB Software Sp. z o.o. 2024  
ul. DOMANIEWSKA, 17/19, lok. 133  
Warsaw, 02-672, Poland  

모든 제품명과 회사명은 해당 소유자의 상표일 수 있습니다.


# api.getReactiveState()

## Description

Gantt의 reactive properties 상태 객체를 반환하는 메서드입니다.  
이 메서드를 사용하면 actions와 동일한 방식으로 반환된 properties를 subscribe할 수 있습니다.

---

## Usage

```javascript
api.getReactiveState(): object;
```

---

## Returns

이 메서드는 다음과 같은 reactive properties를 포함하는 객체를 반환합니다:

```javascript
{
  tasks,
  links,
  start,
  columns,
  end,
  lengthUnit,
  cellWidth,
  cellHeight,
  scaleHeight,
  scales,
  taskTypes,
  zoom,
  selected,
  activeTask,
  baselines,
}
```

---

## Example

아래 예시는 `selected` property를 subscribe하여 선택된 task에 대해 toolbar 버튼을 표시하는 방법을 보여줍니다:

```jsx
import React, { useState, useEffect, useRef } from "react";
import { getData } from "./common/data";
import { Gantt, Toolbar } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import { Button } from "wx-react-wx";

const MyComponent = () => {
  const data = getData();
  const apiRef = useRef();
  const [selected, setSelected] = useState();

  useEffect(() => {
    apiRef.current.getReactiveState().selected.subscribe(val => {
      setSelected(val); // val은 배열입니다
    });
  }, [apiRef.current]);

  const handleDelete = () => {
    if (apiRef.current) {
      apiRef.current.exec("delete-task", { id: selected[0] });
    }
  };

  return (
    <>
      <Toolbar>
        {selected && (
          <Button onClick={handleDelete}>Delete task</Button>
        )}
      </Toolbar>
      <Gantt ref={apiRef} tasks={data.tasks} />
    </>
  );
};

export default MyComponent;
```

---

# api.getState()

이 문서는 **React Gantt API**의 `api.getState()` 메서드에 대한 설명입니다.  
전문 용어(예: API, state, tasks, links 등)는 영어 그대로 유지하고, 설명은 한국어로 번역하였습니다.

---

## 📝 Description

`api.getState()` 메서드는 **현재 Gantt 구성요소의 상태(state) 객체**를 반환합니다.  
이 객체는 **tasks**, **links**, **columns**, **scales** 등 대부분의 Gantt 속성 값을 포함합니다.  
즉, 현재 Gantt 차트의 전반적인 상태를 한 번에 확인할 수 있습니다.

---

## ⚙️ Usage

```ts
api.getState(): object;
```

---

## 🔁 Returns

`api.getState()`는 다음과 같은 속성을 포함하는 객체를 반환합니다:

```js
{
  tasks,
  links,
  start,
  columns,
  end,
  lengthUnit,
  cellWidth,
  cellHeight,
  scaleHeight,
  scales,
  taskTypes,
  zoom,
  selected,
  activeTask,
  baselines,
}
```

각 항목은 다음과 같은 의미를 가집니다:

| 속성 | 설명 |
|:--|:--|
| **tasks** | 현재 Gantt에 표시된 모든 task 데이터 |
| **links** | task 간의 link(연결 관계) 정보 |
| **start** | Gantt chart의 시작 시점 |
| **end** | Gantt chart의 종료 시점 |
| **columns** | 현재 표시 중인 column 구성을 나타내는 배열 |
| **lengthUnit** | 시간 단위 (예: "day", "hour") |
| **cellWidth** | 각 셀의 가로 길이 (픽셀 단위) |
| **cellHeight** | 각 셀의 세로 길이 |
| **scaleHeight** | 상단 scale 영역의 높이 |
| **scales** | 현재 활성화된 time scales 정보 |
| **taskTypes** | 정의된 task 유형 목록 |
| **zoom** | 현재 줌 레벨 값 |
| **selected** | 선택된 task 또는 link의 ID |
| **activeTask** | 현재 활성화된(편집 중인) task 정보 |
| **baselines** | baseline(기준선) 관련 정보 |

---

## 💡 Example

아래 예시는 `api.getState()`를 사용하여 **tasks**와 **links** 상태를 콘솔에 출력하는 방법을 보여줍니다.

```jsx
import { useEffect, useRef } from "react";
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";

const GanttComponent = () => {
  const data = getData();
  const apiRef = useRef();

  useEffect(() => {
    if (apiRef.current) {
      const { tasks, links } = apiRef.current.getState();
      console.log(tasks); // 현재 task 상태 출력
      console.log(links); // 현재 link 상태 출력
    }
  }, [apiRef.current]);

  return <Gantt ref={apiRef} tasks={data.tasks} links={data.links} />;
};

export default GanttComponent;
```

이 예제에서는 `api.getState()`를 통해 Gantt 차트의 내부 데이터를 실시간으로 조회할 수 있습니다.  
이를 활용하면 custom UI나 외부 데이터 저장소와 연동하여 **상태 동기화(synchronization)** 기능을 구현할 수 있습니다.

---


# api.getStores()

이 문서는 **React Gantt API**의 `api.getStores()` 메서드에 대한 설명입니다.  
전문 용어(예: API, DataStore, ref 등)는 영어 그대로 유지하고, 설명은 한국어로 번역하였습니다.

---

## 📝 Description

`api.getStores()` 메서드는 Gantt의 내부 데이터 저장소인 **DataStore** 객체를 반환합니다.  
이 객체는 Gantt가 관리하는 모든 데이터와 상태 정보를 포함하고 있으며,  
현재 로드된 **tasks**, **links** 등의 정보를 직접 접근할 수 있게 해줍니다.

---

## ⚙️ Usage

```ts
api.getStores(): object;
```

---

## 🔁 Returns

`api.getStores()`는 다음과 같은 형태의 객체를 반환합니다:

```js
{
  data: DataStore // ( object of parameters )
}
```

- **data** — Gantt의 내부 DataStore 객체를 나타내며, task 및 link 데이터를 포함합니다.

---

## 💡 Example

아래 예시는 `api.getStores()` 메서드를 사용하여 **DataStore** 내용을 콘솔에 출력하는 방법을 보여줍니다.

```jsx
import React, { useEffect, useRef } from "react";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";
import { getData } from "./common/data";

const MyComponent = () => {
  const apiRef = useRef();

  useEffect(() => {
    if (apiRef.current) {
      const stores = apiRef.current.getStores();
      console.log("DataStore:", stores);
    }
  }, [apiRef.current]);

  return <Gantt ref={apiRef} tasks={data.tasks} links={data.links} />;
};

export default MyComponent;
```

이 예제에서는 `apiRef`를 통해 Gantt 인스턴스에 접근하고,  
`api.getStores()`를 호출하여 내부 DataStore 구조를 확인할 수 있습니다.  
이를 활용하면 custom 데이터 동기화나 디버깅 시 유용합니다.

---



# api.intercept()

이 문서는 **React Gantt API**의 `api.intercept()` 메서드에 대한 설명입니다.  
전문 용어(예: API, action, callback 등)는 영어 그대로 유지하고, 설명은 한국어로 번역하였습니다.

---

## 📝 Description

`api.intercept()` 메서드는 **Gantt actions**를 가로채거나(intercept),  
그 동작을 수정(modify)하거나 차단(block)할 수 있도록 합니다.

즉, 특정 액션이 실행되기 전에 사용자가 그 동작을 중단하거나 변경할 수 있는 훅(hook)입니다.

---

## ⚙️ Usage

```ts
api.intercept(
  action: string,
  callback: function
): void;
```

### Parameters

- **action** *(required)* — 가로채려는 Gantt action의 이름.  
- **callback** *(required)* — 실행될 콜백 함수.  
  콜백 인자는 action 종류에 따라 다르며,  
  `false`를 반환하면 해당 action의 실행이 **차단(block)** 됩니다.

> 🔗 참고:  
> - 전체 **Gantt actions** 목록은 [여기](https://docs.svar.dev/react/gantt/api/overview/actions_overview)에서 확인할 수 있습니다.  
> - 단순히 action을 **감지(listen)** 하기만 원한다면 [`api.on()`](https://docs.svar.dev/react/gantt/api/methods/on)을 사용하세요.  
> - action의 동작을 **변경하거나 중단**하려면 `api.intercept()`를 사용합니다.

---

## 💡 Example

아래 예시에서는 `api.intercept()`를 사용하여 기본 **Editor**가 열리지 않도록 합니다.  
`false`를 반환함으로써 `"show-editor"` action이 실행되지 않게 차단합니다.

```jsx
import { useEffect, useRef } from "react";
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";

const MyComponent = () => {
  const data = getData();
  const apiRef = useRef();

  useEffect(() => {
    if (apiRef.current) {
      apiRef.current.intercept("show-editor", (data) => {
        return false;
      });
    }
  }, [apiRef.current]);

  return <Gantt apiRef={apiRef} tasks={data.tasks} />;
};

export default MyComponent;
```

이 예제에서는 `"show-editor"` 이벤트가 실행될 때 콜백이 `false`를 반환함으로써  
기본 Editor가 표시되지 않게 차단합니다.

---


# api.on()

이 문서는 **React Gantt API**의 `api.on()` 메서드에 대한 설명입니다.  
전문 용어(예: API, event, handler 등)는 영어 그대로 유지하고, 설명은 한국어로 번역하였습니다.

---

## 📝 Description

`api.on()` 메서드는 **Gantt 내부 이벤트(inner events)**에 **handler(이벤트 핸들러)**를 등록할 수 있게 해줍니다.  
즉, 사용자는 특정 이벤트가 발생할 때 실행될 동작을 정의할 수 있습니다.

> 🧠 참고:  
> - 이벤트의 동작을 단순히 “감지(listen)”만 하고 싶다면 `api.on()`을 사용합니다.  
> - 이벤트를 “변경(modify)”하거나 “차단(block)”하고 싶다면 [`api.intercept()`](https://docs.svar.dev/react/gantt/api/methods/intercept)를 사용해야 합니다.

---

## ⚙️ Usage

```ts
api.on(
  event: string,
  handler: function
): void;
```

### Parameters

| 파라미터 | 설명 |
|:--|:--|
| **event** *(required)* | 감지할 Gantt 이벤트 이름 |
| **handler** *(required)* | 이벤트가 발생했을 때 실행될 함수. 이벤트 유형에 따라 인자가 달라질 수 있습니다. |

> 전체 이벤트 목록은 [Actions Overview](https://docs.svar.dev/react/gantt/api/overview/actions_overview)에서 확인할 수 있습니다.

---

## 💡 Example

아래 예시에서는 `api.on("delete-link")` 이벤트를 등록하여,  
link가 삭제될 때마다 삭제된 link의 ID를 콘솔에 출력합니다.

```jsx
import { useEffect, useRef } from "react";
import { getData } from "./common/data";
import { Gantt } from "wx-react-gantt";
import "wx-react-gantt/dist/gantt.css";

const data = getData();

function GanttComponent() {
  const apiRef = useRef();

  useEffect(() => {
    if (apiRef.current) {
      apiRef.current.on("delete-link", (ev) => {
        console.log("The id of the deleted link:", ev.id);
      });
    }
  }, [apiRef.current]);

  return (
    <Gantt
      apiRef={apiRef}
      tasks={data.tasks}
      links={data.links}
      // other settings...
    />
  );
}

export default GanttComponent;
```

이 예제에서는:
- Gantt 인스턴스(`apiRef`)에서 `"delete-link"` 이벤트를 감지합니다.  
- 삭제된 link의 ID가 콘솔에 출력됩니다.  
- 이를 통해 사용자는 이벤트 기반 동작을 쉽게 구현할 수 있습니다.

---

